ğŸ¬ SAM2 Video Processing Pipeline
==================================================
ğŸ“‹ Config: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/configs/pipeline_config.yaml
ğŸ“Š Metadata: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/raw_data_organized/experiment_metadata.json
ğŸ¯ Annotations: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/detections/gdino_detections.json
ğŸ’¾ Output: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/segmentation/grounded_sam_segmentations.json
ğŸ­ Target prompt: 'individual embryo'
ğŸ“¦ Format: rle
ğŸ–¥ï¸  Device: cuda
ğŸ”¬ Processing entities: ['20231206', '20240418', '20250612_30hpf_ctrl_atf6']

ğŸ”§ Loading SAM2 configuration...
ğŸ¬ Initializing GroundedSamAnnotations...
ğŸ¬ Initializing GroundedSamAnnotations...
   Target prompt: 'individual embryo'
   Segmentation format: rle
   Output file: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/segmentation/grounded_sam_segmentations.json
ğŸ“š Loading components...
âœ… Components loaded successfully
ğŸ“ Initialized new results structure
âœ… GroundedSamAnnotations initialized successfully
ğŸ”§ Loading SAM2 model...
ğŸ”§ Loading SAM2 model...
âœ… SAM2 model loaded on GPU
âœ… SAM2 model loaded successfully
ğŸ¯ Found 264 videos to process
ğŸ“¹ Videos:
   - 20231206_D06: 59 images
   - 20231206_G11: 59 images
   - 20231206_B08: 59 images
   - 20231206_G05: 53 images
   - 20231206_C12: 59 images
   ... and 259 more videos

ğŸ¯ Processing 264 videos for SAM2 segmentation

ğŸ“¹ Processing video 1/264: 20231206_D06
ğŸ¬ Processing video: 20231206_D06
ğŸ¬ Processing single video: 20231206_D06
ğŸ“ Video directory: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/raw_data_organized/20231206/images/20231206_D06
ğŸ–¼ï¸ Total frames: 59
â¡ï¸ Forward propagation from first frame - avoiding bidirectional propagation
ğŸŒ± Seed frame: 20231206_D06_t0000 (index 0)
ğŸ¯ Seed detections: 1
ğŸ¬ Running SAM2 propagation from seed frame 0
âœ… SAM2 propagation complete for 59 frames
âœ… Video 20231206_D06 processed: 59 frames
âœ… Video 20231206_D06 processed successfully
â„¹ï¸ Hierarchy validation disabled
ğŸ“‹ Entity tracker updated: {'experiments': 1, 'videos': 1, 'images': 59, 'embryos': 1, 'snips': 59}
ğŸ’¾ SAM2 results saved to /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/segmentation/grounded_sam_segmentations.json
ğŸ’¾ Auto-saved after 1 videos

ğŸ“¹ Processing video 2/264: 20231206_G11
ğŸ¬ Processing video: 20231206_G11
ğŸ¬ Processing single video: 20231206_G11
ğŸ“ Video directory: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/raw_data_organized/20231206/images/20231206_G11
ğŸ–¼ï¸ Total frames: 59
â¡ï¸ Forward propagation from first frame - avoiding bidirectional propagation
ğŸŒ± Seed frame: 20231206_G11_t0000 (index 0)
ğŸ¯ Seed detections: 1
ğŸ¬ Running SAM2 propagation from seed frame 0
âœ… SAM2 propagation complete for 59 frames
âœ… Video 20231206_G11 processed: 59 frames
âœ… Video 20231206_G11 processed successfully
â„¹ï¸ Hierarchy validation disabled
ğŸ“‹ Entity tracker updated: {'experiments': 1, 'videos': 2, 'images': 118, 'embryos': 2, 'snips': 118}
ğŸ“¦ Created backup: grounded_sam_segmentations.backup.20250813_005433.json
ğŸ’¾ SAM2 results saved to /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/segmentation/grounded_sam_segmentations.json
ğŸ’¾ Auto-saved after 2 videos

ğŸ“¹ Processing video 3/264: 20231206_B08
ğŸ¬ Processing video: 20231206_B08
ğŸ¬ Processing single video: 20231206_B08
ğŸ“ Video directory: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/raw_data_organized/20231206/images/20231206_B08
ğŸ–¼ï¸ Total frames: 59
â¡ï¸ Forward propagation from first frame - avoiding bidirectional propagation
ğŸŒ± Seed frame: 20231206_B08_t0000 (index 0)
ğŸ¯ Seed detections: 1
ğŸ¬ Running SAM2 propagation from seed frame 0
âœ… SAM2 propagation complete for 59 frames
âœ… Video 20231206_B08 processed: 59 frames
âœ… Video 20231206_B08 processed successfully
â„¹ï¸ Hierarchy validation disabled
ğŸ“‹ Entity tracker updated: {'experiments': 1, 'videos': 3, 'images': 177, 'embryos': 3, 'snips': 177}
ğŸ“¦ Created backup: grounded_sam_segmentations.backup.20250813_005453.json
ğŸ—‘ï¸  Removed old backup: grounded_sam_segmentations.backup.20250813_005433.json
ğŸ’¾ SAM2 results saved to /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/segmentation/grounded_sam_segmentations.json
ğŸ’¾ Auto-saved after 3 videos

ğŸ“¹ Processing video 4/264: 20231206_G05
ğŸ¬ Processing video: 20231206_G05
ğŸ¬ Processing single video: 20231206_G05
ğŸ“ Video directory: /net/trapnell/vol1/home/mdcolon/proj/morphseq/segmentation_sandbox/data/raw_data_organized/20231206/images/20231206_G05
ğŸ–¼ï¸ Total frames: 59
â¡ï¸ Forward propagation from first frame - avoiding bidirectional propagation
ğŸŒ± Seed frame: 20231206_G05_t0000 (index 0)
ğŸ¯ Seed detections: 1
ğŸ¬ Running SAM2 propagation from seed frame 0
